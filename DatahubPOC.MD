
# Datahub POC

# Pre-requisites
	Java 21
	Docker
	Python
	IDE (Optional)
	
# Set-up

## Kafka
	execute docker-compose using the yaml file in Docker/compose_yaml
	"docker-compose -f .\docker-kafka.yml up"
	
	- This starts Kafka with advertised listener to port 9092
	- It also includes Kafka-UI (http://localhost:18080/), web-based GUI for managing Kafka topics, messages, and brokers.

## DatahubPOC
Springboot application that contains **Ingester** service that exposes a RestAPI endpoint where messages can be sent to. Messages received will then be sent to **IncomingTopic** (all messages) and **Partner1Incoming** or **Partner2Incoming** based on *partnerId*
**StreamProcessor** will then consume all messages in IncomingTopic, transform it to JSON format, and route it to corresponding outgoing topics; **Partner1Outgoing** and **Partner2Outgoing** if *formatType* is A and B respectively. 

- execution: "./mvnw spring-boot:run"
- All Kafka topics will automatically be created

## Adapter
Springboot application that creates the server to which partner consumer can connect to. It contains a kafka listener that reads messages from **Partner1Outgoing** and **Partner2Outgoing** topics, and transforms the messages into XML format, and sends it to the connected consumer partner.

-  execution: “./mvnw spring-boot:run”
- Listens to port 9293 for partner connections

## Partner Simulators
Contains the python script to execute partner functionalities
- producer.py \*messageCount*
	- execution: "python producer.py 10"
	- generates *messageCount* XML messages based on template provided (template/default.xml) and puts random value on the partnerId (values: 1,2) to determine to which incoming topic it will be sent at initial ingestion, formatType (values: A,B) to determine which outgoing topic it will be finally sent, and body (index|timestamp) for metrics. XML messages are sent to DatahubPOC via RestAPI endpoint (http://localhost:8080/datahub/)
- consumer.py \*messageCount*
	- execution: "python consumer.py 10"
	- connects consumes *messageCount* XML messages read from outgoing topics, displays the calculated elapsed time from which the message is generated by the producer up until it was received by this consumer. After all messages received it will display calculated messages per second.
	
	
	
